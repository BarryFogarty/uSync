<div id="snapshotDashboard" ng-controller="uSyncSnapshotDashboardController" class="usync-snapshots">
    <div class="row">
        <div class="span8">
            <h3>uSync Snapshots <small>(site mode: {{settings.Mode}})</small></h3>
            <p>uSync Snapshots are moment in time captures of your umbraco install. when you create a snapshot only the changes 
			since the last snapshot are captured, giving you a clear list of whats changed on your site.
            </p>
        </div>	
    </div>

    <div>

        <div class="row">
		  <div class="span8">
			<h4>Current Snapshots <small>(located in ~/usync/snapshots)</small></h4>
		  </div>
		  <div class="span4">
			<div class="refresh"><button ng-click="refresh()" class="btn btn-small btn-success"><i class="icon icon-refresh"></i> Refresh</button></div>
		  </div>
		 
            <div class="span12">
			<div ng-show="loading">
				<ul class="snapshot-progress animated -half-second" style="list-style: none;position:relative;">
					<li class="umb-load-indicator__bubble"></li>
					<li class="umb-load-indicator__bubble"></li>
					<li class="umb-load-indicator__bubble"></li>
					<li class="umb-load-indicator__bubble"></li>
				</ul>
			</div>
			<table class="table" ng-hide="loading">
			<thead>
				<tr>
					<th>Name</th><th>Items</th><th>Date Created</th><th>Date Applied</th><th>Actions</th>
				</tr>
			</thead>
			<tr ng-repeat="snapshot in snapshots">
				<td>{{snapshot.Name}}</td>
				<td>{{snapshot.FileCount}}</td>
				<td>{{snapshot.Created | date:'dd-MMM-yyyy HH:mm:ss'}}</td>
				<td></td>
				<td ng-show="snapshot.FileCount > 0">
					<span ng-hide="settings.Mode == 'source'">
						<button class="btn btn-mini" ng-click="apply(snapshot.Name)">Apply</button>
						<button class="btn btn-mini" ng-click="report(snapshot.Name)">Report</button>
					</span>
					&nbsp;
					<span ng-hide="settings.Mode == 'target'">
						<button class="btn btn-mini btn-danger" ng-click="delete(snapshot.Name)">Delete</button>
					</span>
				</td>
			</tr>
			<tr ng-show="noChanges">
				<td colspan="5"><div class="alert alert-warning">No changes where detected since last snapshot</div></td>
			</tr>
			<tr ng-show="working">
				<td colspan="5">
					<ul class="snapshot-progress animated -half-second" style="list-style: none;position:relative;">
						<li class="umb-load-indicator__bubble"></li>
						<li class="umb-load-indicator__bubble"></li>
						<li class="umb-load-indicator__bubble"></li>
						<li class="umb-load-indicator__bubble"></li>
					</ul>
				</td>
			</tr>
			</table>
				<div class="span12" ng-hide="settings.Mode == 'target'">
					<div class="new-snapshot" ng-hide="working">
					<form class="form-horizontal" id="snapshotCreate">
						<div class="control-group">
							<label for="snapshotName" class="control-label">Create New Snapshot: </label>
						<div class="controls">
							<input type="text" id="snapshotName" ng-model="snapshotName" no-Dirty-Check>
							<button id="btnSnapshot" ng-click="CreateSnapshot()" class="btn btn-default" ng-enabled="!working">Create</button>
						</div>
						</div>
					</form>
					</div>
				</div>

            </div>
		  <div class="span12">
			<div ng-hide="settings.Mode == 'source'">
				<h4 data-toggle="tooltip" title="import stuff">Import Snapshots</h4>
				<p>
					Import the changes from snapshots: uSync combines all the snapshots together and then 
					apply any changes to your site.<em>This is the recommended way to keep the site upto date with snapshots.
				</em></p>
				<div>
					<button ng-click="applyAll()" class="btn btn-success">Apply All</button>
					<button ng-click="reportAll()" class="btn btn-info">Report All</button>
				</div>
			</div>
			  <div class="report-detail">
				<div ng-show="reporting">
					<ul class="snapshot-progress animated -half-second" style="list-style: none;position:relative;">
						<li class="umb-load-indicator__bubble"></li>
						<li class="umb-load-indicator__bubble"></li>
						<li class="umb-load-indicator__bubble"></li>
						<li class="umb-load-indicator__bubble"></li>
					</ul>
				</div>
				<div ng-show="reported">
					<div class="span8">
						<h4>{{reportName}} Processed <small>{{changes.length}} items, {{getChangeCount()}} Changes</small></h4>
					</div>
					<div class="span4">
						<div class="report-controls">
							show 'no change' items <input ng-model="showNoChange" type="checkbox" class="form-control"> 
						</div>
					</div>
					<table class="table" ng-show="showNoChange || getChangeCount() > 0">
						<tr>
							<th>Name</th>
							<th>Type</th>
							<th>Change</th>
							<th>Message</th>
						</tr>
						</tr>
						<tr ng-repeat="change in changes" ng-class="{'text-warning' : !change.Success, 'muted' : change.Change == 0 }" ng-show="showChange(change.Change)">
							<td>{{change.Name}}</td>
							<td>{{getChangeName(change.Change)}}</td>
							<td>{{getTypeName(change.ItemType)}}</td>
							<td>{{change.Message}}</td>
						</tr>
					</table>
				</div>
			  </div>
		  </div>
        </div>


    </div>
</div>